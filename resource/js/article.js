/* 文章目录 */
$(function(){create_postmenu()});function create_postmenu(){if(0==$("article:not(.ispage) .post_content").find("h2,h3,h4,h5,h6").length)$(".post_menu_section").remove(),$(".cat_mainmenu_out .right .pjax_anniu_area .ToMenu_anniu").remove();else{$(".post_menu_section").show();var b=["h2","h3","h4","h5","h6"];$(".post_content").find("h2,h3,h4,h5,h6").each(function(a,e){var c=$(this);$('\x3cspan id\x3d"menu'+a+'"\x3e\x3c/span\x3e').insertBefore(c);var d=c[0].tagName.toLowerCase(),d=parseInt(d.charAt(1))-2;$("#post_menu").append($('\x3cspan goto\x3d"#menu'+a+'" class\x3d"post_menu_item post_menu_tag_'+b[d]+'"\x3e'+c.text()+"\x3c/span\x3e"))});$(".post_menu_tag_h2").prepend('\x3ci class\x3d"ri-h-2"\x3e. \x3c/i\x3e');$(".post_menu_tag_h3").prepend('\x3ci class\x3d"ri-h-3"\x3e. \x3c/i\x3e');$(".post_menu_tag_h4").prepend('\x3ci class\x3d"ri-h-4"\x3e. \x3c/i\x3e');$(".post_menu_tag_h5").prepend('\x3ci class\x3d"ri-h-5"\x3e. \x3c/i\x3e');$(".post_menu_tag_h6").prepend('\x3ci class\x3d"ri-h-6"\x3e. \x3c/i\x3e');var a=$("#post_menu span").first().attr("class"),a=a.substr(a.length-1,1);$(".post_menu_tag_h"+(parseInt(a)+1).toString()).css("padding-left","2rem");$(".post_menu_tag_h"+(parseInt(a)+2).toString()).css("padding-left","4rem");$(".post_menu_tag_h"+(parseInt(a)+3).toString()).css("padding-left","6rem");$(".post_menu_tag_h"+(parseInt(a)+4).toString()).css("padding-left","8rem");$(".post_menu_tag_h"+(parseInt(a)+5).toString()).css("padding-left","10rem")}}$(document).on("click",".ToMenu_anniu",function(){$("#cat_tanchuang_off").show();$("#cat_mobile_postmenu").addClass("cat_tanchuang_on");$("#cat_mobile_postmenu").append($("#post_menu"))});$(document).on("click","#post_menu .post_menu_item",function(){$("#cat_tanchuang_off").hide();$(".cat_tanchuang").removeClass("cat_tanchuang_on");$(".menu_position").after($("#post_menu"));var b=$(this).attr("goto");0==$(".cat_mainmenu_out").height()?$("html, body").scrollTop($(b).offset().top):$("html, body").scrollTop($(b).offset().top-($(".cat_mainmenu_out").offset().top-$(window).scrollTop()+$(".cat_mainmenu_out").outerHeight()))});$(document).on("click",".Fontsize_anniu",function(){$(this).hasClass("anniu_on")?($(".Fontsize_anniu").removeClass("anniu_on"),$("article .post_content p").css("font-size","1rem"),jbox_alert("green","\u6b63\u6587\u5b57\u4f53\u5927\u5c0f\u5df2\u6062\u590d\uff01")):($(".Fontsize_anniu").addClass("anniu_on"),$("article .post_content p").css("font-size","1.25rem"),jbox_alert("green","\u6b63\u6587\u5b57\u4f53\u5927\u5c0f\u5df2\u653e\u5927\uff01"))});$(document).on("click",".Print_anniu",function(){var b=$("article").prop("outerHTML"),a=document.body.innerHTML;document.body.innerHTML=b;window.print();document.body.innerHTML=a});$(document).on("click",".Albumshow_anniu",function(){$("#cat_tanchuang_off").show();$("#album_card").addClass("cat_tanchuang_on");$("#album_card .title").html($(".post_title_area .post_title_area_title").html());$("#album_card cat_post_album_column").empty();$("article cat_post_image").each(function(){var b=$(this).html();$("#album_card cat_post_album_column").append("\x3ccat_post_image\x3e"+b+"\x3c/cat_post_image\x3e")})});$(document).on("click",".imagesize_anniu",function(){$(this).hasClass("anniu_on")?($(".imagesize_anniu").removeClass("anniu_on"),$("#album_card cat_post_album_column img").css("height","12rem"),jbox_alert("green","\u7167\u7247\u5927\u5c0f\u5df2\u6062\u590d\uff01")):($(".imagesize_anniu").addClass("anniu_on"),$("#album_card cat_post_album_column img").css("height","20rem"),jbox_alert("green","\u7167\u7247\u5927\u5c0f\u5df2\u653e\u5927\uff01"))});$(document).on("click",".cat_hideshowbox_open",function(){$(this).closest(".cat_article_hideshow").siblings(".cat_hideshowbox_text").slideToggle();console.log($(this).closest(".cat_article_hideshow").find("b").css("font-size"));"16px"==$(this).closest(".cat_article_hideshow").find("b").css("font-size")?($(this).closest(".cat_article_hideshow").css("background","var(--theme-60)"),$(this).closest(".cat_article_hideshow").find("b").css("color","#fff"),$(this).closest(".cat_article_hideshow").find("b").css("font-size","20px"),$(this).closest(".cat_article_hideshow").find(".ar_show_icon").hide(),$(this).closest(".cat_article_hideshow").find(".ar_hide_icon").show()):($(this).closest(".cat_article_hideshow").css("background","transparent"),$(this).closest(".cat_article_hideshow").find("b").css("color","var(--theme-60)"),$(this).closest(".cat_article_hideshow").find("b").css("font-size","16px"),$(this).closest(".cat_article_hideshow").find(".ar_hide_icon").hide(),$(this).closest(".cat_article_hideshow").find(".ar_show_icon").show())});$(document).on("click",".Read_anniu",function(){$("#cat_tanchuang_off").show();$("#read_card").addClass("cat_tanchuang_on");$("#cat_tanchuang_off").addClass("readmode_tanchuang_on");$("#read_card .title").html($(".post_title_area .post_title_area_title").html());$("#read_card .end").before($("article"))});$(document).on("click",".main_screen .readmode_tanchuang_on",function(){setTimeout(function(){$("#article_position").after($("article"));$("#cat_tanchuang_off").removeClass("readmode_tanchuang_on")},100)});$(document).on("click","#read_card .Out_Print_anniu",function(){$(".readmode_tanchuang_on").click();$("#cat_tanchuang_off").click()});$(document).on("click",".Dashang_anniu",function(){$("#cat_tanchuang_off").show();$("#dashang_card").addClass("cat_tanchuang_on")});$(document).on("click",".Share_anniu",function(){$("#cat_tanchuang_off").show();$("#share_card").addClass("cat_tanchuang_on")});$(document).on("click",".post_agree",function(){$.ajax({type:"post",url:$(".post_agree").attr("data-url"),data:"agree\x3d"+$(".post_agree").attr("data-cid"),async:!0,timeout:3E4,cache:!1,success:function(b){b=parseInt($.trim($(".post_agree .agreed_num").html()));$(".post_agree .agreed_num").html(++b);$(".post_agree").css("pointer-events","none");$(".agree_icon").css("cursor","not-allowed");$(".agree_icon .anniu").addClass("anniu_on");jbox_alert("green","\u611f\u8c22\u60a8\u7684\u8d5e\u8d4f\uff01")},error:function(){$(".post_agree .agreed_num").html(num);jbox_alert("red","\u8d5e\u8d4f\u5931\u8d25\uff01")}})});$(document).on("click",".Post_Like .post_like_button",function(){var b=$(this).attr("data-zid"),a=$("#cat_remembered_logined_username").html(),c=$("#cat_remembered_logined_usermail").html(),e=$(".end_block .Admin_anniu img").attr("src"),f=$(".post_like_button .beforelike").eq(0).text(),d=parseInt(f)+1;""==a?$(".Login_anniu ").click():$.ajax({url:CAT.BASE_API,type:"POST",data:{routeType:"post_like",likename:a,likemail:c,likecid:b},dataType:"text",success:function(a){jbox_alert("green","\ud83c\udf1f \u6807\u8bb0\u6210\u529f\uff01\x3cbr\x3e\u53ef\u4f7f\u7528 Ctrl + D \u6dfb\u52a0\u5230\u6d4f\u89c8\u5668\u6536\u85cf\u5939\uff01");$(".post_like_button").addClass("anniu_on");$("article .post_like_button i").css("color","var(--color-red)");$("article .post_like_button i").css("opacity","0.6");$(".post_like_button i").attr("title","\u53d6\u6d88\u6536\u85cf");$(".post_like_button .post_likenumchange").text(d);$(".Post_Like").css("cursor","not-allowed");$(".post_like_button").css("pointer-events","none");$(".post_lovers_avatar .Post_Like").after('\x3cspan class\x3d"post_likedavatar"\x3e\x3cimg class\x3d"avatar" src\x3d"'+e+'"\x3e\x3c/span\x3e');$(".post_nolikenumchange").css("display","none")},error:function(){jbox_alert("red","\u6807\u8bb0\u7cfb\u7edf\u51fa\u9519\uff01")}})});$(document).on("click",".Post_Like .post_likeD_button",function(){var b=$(this).attr("data-zid"),a=$("#cat_remembered_logined_usermail").html(),c=$(".post_likeD_button .afterlike").eq(0).text(),e=parseInt(c)-1;$.ajax({url:CAT.BASE_API,type:"POST",data:{routeType:"post_likeD",likemail:a,likecid:b},dataType:"text",success:function(a){jbox_alert("green","\u5df2\u53d6\u6d88\u6807\u8bb0\uff01");$(".post_likeD_button").removeClass("anniu_on");$(".post_likeD_button .post_likenumchange").text(e);$(".Post_Like").css("cursor","not-allowed");$(".post_likeD_button").css("pointer-events","none");$("article .post_likeD_button i").css("color","var(--colorD)");$("article .post_likeD_button i").css("opacity","1")},error:function(){jbox_alert("red","\u6807\u8bb0\u7cfb\u7edf\u51fa\u9519\uff01")}})});$(document).on("click",".cat_welove_things .Check_area .check",function(){jbox_alert("green","\u6253\u5361\u4e2d...");$this=$(this);var b=$this.parents("li").attr("thing"),a=$("article").attr("cid");$.ajax({url:CAT.BASE_API,type:"POST",data:{routeType:"check",thing:b,cid:a},dataType:"text",success:function(a){jbox_alert("green","\u6253\u5361\u6210\u529f\uff01");$this.removeClass("check").removeClass("no");$this.addClass("checked").addClass("yes");$this.parent(".Check_area").css("cursor","not-allowed");$this.parents(".cat_block").children(".words").children(".itemword").addClass("del");$this.css("pointer-events","none");a=new Date;a=a.getFullYear()+"\u5e74"+(a.getMonth()+1)+"\u6708"+a.getDate()+"\u65e5";$this.parent(".Check_area").siblings(".words").children("time").text(a)},error:function(){}})});$(document).on("click",".cat_welove_things .Check_area .checked",function(){$this=$(this);var b=$this.parents("li").attr("thing"),a=$("article").attr("cid");$.ajax({url:CAT.BASE_API,type:"POST",data:{routeType:"checked",thing:b,cid:a},dataType:"text",success:function(a){$this.removeClass("checked").removeClass("yes");$this.addClass("check").addClass("no");$this.parent(".Check_area").css("cursor","not-allowed");$this.parents(".cat_block").children(".words").children(".itemword").removeClass("del");$this.css("pointer-events","none");$this.parent(".Check_area").siblings(".words").children("time").text("")},error:function(){}})});$(document).on("click",".qa_off",function(){$this=$(this);$this.attr("link");var b=$this.attr("cid");$.ajax({url:CAT.BASE_API,type:"POST",data:{routeType:"qa_comment_off",cid:b},dataType:"text",success:function(a){$(".qa_off").hide();$(".cat_comment_title").hide();$(".qa_has_off").show();$(".ri-question-line").addClass("ri-checkbox-circle-line").removeClass("ri-question-line").css("color","green");jbox_alert("green","\u6b64\u95ee\u9898\u5df2\u5173\u95ed\uff01")},error:function(a){jbox_alert("red","\u95ee\u9898\u5173\u95ed\u51fa\u9519\uff01")}})});