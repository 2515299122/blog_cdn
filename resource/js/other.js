/* 舰娘 */
var prefixs=["-webkit-","-moz-","-ms-",""];document.ondragstart=function(){return!1};var kan=$(".kankore-bath .kan"),end_left=$(".end_block").offset().left+80,end_width=$(".end_block").width()-48,x=end_left,dx=10,y=$(".end_block").offset().top-40,angle=1.3;kan.css({left:x,top:y,display:"block"}).addClass("floating");$(document).on("mousedown",".kan",start_drag).on("mousemove",dragging).on("mouseup",stop_drag);$(".end_block .user_avatar").hover(function(){y-=48},function(){y+=48});var tick=null;float();function float(){clearInterval(tick);tick=setInterval(frame,1E3)}function frame(){x<end_left?dx=10:x>end_left+end_width&&(dx=-10);x+=dx;var a=y+3*Math.sin(x)-3;angle=4*Math.random()-2;var a={left:x,top:a},b;for(b in prefixs)a[prefixs[b]+"transform"]="rotate("+angle+"deg)";kan.css(a)}function pause(){clearInterval(tick)}var offsetX,offsetY,mouse_down_flag=!1,mouse_move_flag=!1;function start_drag(a){pause();kan.removeClass("floating").addClass("dragging");mouse_down_flag=!0;mouse_move_flag=!1;offsetX=kan.offset().left-a.pageX;offsetY=kan.offset().top-a.pageY}function dragging(a){mouse_down_flag&&(mouse_move_flag=!0,x=a.clientX+offsetX,kan.css({left:x,top:a.clientY+offsetY}))}function stop_drag(){kan.removeClass("dragging").addClass("dropping");x<end_left?x=end_left:x>end_left+end_width&&(x=end_left+end_width);kan.css({left:x,top:y});setTimeout(function(){kan.removeClass("dropping").addClass("floating");frame();float()},800);mouse_move_flag=mouse_down_flag=!1};